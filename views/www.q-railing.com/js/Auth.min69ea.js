var Auth=function(){this.init();};Auth.prototype={init:function(){var self=this;$(document).ready(function(){self.login.init();});},login:{submit_button_sel:'.js-login-submit',login_form:'',init:function(){if($(this.submit_button_sel).length){this.setEvents();}},setEvents:function(){this.submitEvent();},submitEvent:function(){var self=this;$(document).on('click',self.submit_button_sel,function(event){event.preventDefault();self.setFrom($(this).closest('form'));self.send();});$(self.submit_button_sel).closest('form').submit(function(event){event.preventDefault();self.setFrom($(this));self.send();});},getForm:function(){return this.login_form;},setFrom:function($form){this.login_form=$form;},getLang:function(){return $('html').attr('lang');},removeMessages:function(){this.getForm().find('.error').hide();},showMessages:function(){this.getForm().find('.error').show();},send:function(){var $form=this.getForm(),self=this;var data=$form.serializeArray();data.push({name:'action',value:'login'});$.ajax({url:$form.attr('action'),type:'post',data:data,dataType:'json',beforeSend:function(){self.removeMessages();},complete:function(){},success:function(response){if(response.success==false){self.showMessages();}else{if(response.data.redirect_url){window.location.href=response.data.redirect_url;}else{window.location.reload(true);}}}});}}};var auth=new Auth();